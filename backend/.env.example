# ===================================================================
# VejaPRO Backend — Aplinkos kintamuju pavyzdys
# ===================================================================
# Kopijuok si faila i .env ir uzpildyk reikiamas reiksmes.
# Kintamieji su [PRIVALOMAS] turi buti nustatyti pries paleidziant.
# Kintamieji su [default: X] turi numatytas reiksmes ir gali buti praleisti.
#
# Saltinis: backend/app/core/config.py::Settings
# Pastaba: config.py turi extra="forbid" — nepridek neatpazintu kintamuju!
# ===================================================================

# ========================
# DUOMENU BAZE
# ========================

# [PRIVALOMAS] PostgreSQL (prod) arba SQLite (testams)
# Pavyzdys: postgresql://user:pass@host:5432/dbname?sslmode=require
# Testams: sqlite:///./test.db
DATABASE_URL=

# ========================
# SUPABASE (autentifikacija)
# ========================

# [PRIVALOMAS] Supabase projekto URL ir raktai
SUPABASE_URL=
SUPABASE_KEY=
SUPABASE_SERVICE_ROLE_KEY=
# [PRIVALOMAS] JWT paslaptis (min 32 simboliai) — naudojama JWT verifikacijai
SUPABASE_JWT_SECRET=
# [default: authenticated] JWT "aud" claim
SUPABASE_JWT_AUDIENCE=authenticated

# ========================
# MOKEJIMAI
# ========================

# [default: true] Grynuju/banko mokejimu modulis
ENABLE_MANUAL_PAYMENTS=true
# [default: false] Stripe mokejimai
ENABLE_STRIPE=false
# Privalomi jei ENABLE_STRIPE=true:
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# ========================
# TWILIO (SMS)
# ========================

# [default: true] SMS siuntimas per Twilio
ENABLE_TWILIO=true
# Privalomi jei ENABLE_TWILIO=true:
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM_NUMBER=
TWILIO_WEBHOOK_URL=
# Twilio Voice webhook URL (jei nenustatyta, naudojamas request URL)
TWILIO_VOICE_WEBHOOK_URL=
# Twilio WhatsApp siuntimu numeris (su "whatsapp:" priesdeliu)
# Sandbox: whatsapp:+14155238886 | Production: whatsapp:+370XXXXXXXX
TWILIO_WHATSAPP_FROM_NUMBER=

# ========================
# EMAIL / SMTP
# ========================

# [default: false] Email intake (Unified Client Card) modulis
ENABLE_EMAIL_INTAKE=false
# Privalomi jei ENABLE_EMAIL_INTAKE=true:
SMTP_HOST=
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=
# [default: 587] SMTP portas
SMTP_PORT=587
# [default: true] Naudoti STARTTLS
SMTP_USE_TLS=true
# [default: 30] Email pasiulymo HELD trukme minutemis
EMAIL_HOLD_DURATION_MINUTES=30
# [default: 5] Max email pasiulymo bandymu skaicius
EMAIL_OFFER_MAX_ATTEMPTS=5

# ========================
# FEATURE FLAGS (moduliai)
# ========================

# [default: false] Skambuciu uzklauso modulis (landing page forma)
ENABLE_CALL_ASSISTANT=false
# [default: false] Kalendoriaus/susitikimu modulis
ENABLE_CALENDAR=false
# [default: false] Planavimo variklis (HOLD, RESCHEDULE, daily-approve)
ENABLE_SCHEDULE_ENGINE=false
# [default: false] Galerija ir marketingo funkcijos
ENABLE_MARKETING_MODULE=false
# [default: true] Asinchroniniu pranesimu eile (SMS/email/WhatsApp)
ENABLE_NOTIFICATION_OUTBOX=true
# [default: false] Background workeriai (hold expiry, outbox dispatch)
ENABLE_RECURRING_JOBS=false
# [default: false] WhatsApp ping pranesimai (siuo metu stub)
ENABLE_WHATSAPP_PING=false
# [default: false] AI nuotrauku analize (legacy flag)
ENABLE_VISION_AI=false

# ========================
# FINANCE MODULIS
# ========================

# [default: false] Finansu knyga (ledger CRUD, suvestines, reversal)
ENABLE_FINANCE_LEDGER=false
# [default: false] Dokumentu upload + AI ekstrakcija
ENABLE_FINANCE_AI_INGEST=false
# [default: true] Automatinis vendor taisykliu pritaikymas
ENABLE_FINANCE_AUTO_RULES=true
# [default: false] SSE finance metrics dashboard
ENABLE_FINANCE_METRICS=false
# [default: 10] Max vienalaikiu SSE jungciu
FINANCE_METRICS_MAX_SSE_CONNECTIONS=10
# [default: 30] SSE rate limit per minute
FINANCE_METRICS_RATE_LIMIT_PER_MIN=30

# ========================
# AI MODULIS
# ========================

# [default: false] AI intent analize
ENABLE_AI_INTENT=false
# [default: false] AI vision (nuotraukos)
ENABLE_AI_VISION=false
# [default: false] AI finance dokumentu ekstrakcija
ENABLE_AI_FINANCE_EXTRACT=false
# [default: false] AI overrides (admin korekcijos)
ENABLE_AI_OVERRIDES=false
# [default: false] Saugoti AI raw atsakymus (debug)
AI_DEBUG_STORE_RAW=false

# [default: mock] AI intent provideris: mock | groq | claude | openai
AI_INTENT_PROVIDER=mock
# [default: ""] AI modelio pavadinimas (pvz. llama-3.1-70b)
AI_INTENT_MODEL=
# [default: 1.2] Intent timeout sekundemis
AI_INTENT_TIMEOUT_SECONDS=1.2
# [default: 2.0] Intent budget sekundemis
AI_INTENT_BUDGET_SECONDS=2.0
# [default: 1] Intent max retry
AI_INTENT_MAX_RETRIES=1
# [default: 8.0] Bendras AI timeout sekundemis
AI_TIMEOUT_SECONDS=8.0
# [default: 0.3] AI temperature
AI_TEMPERATURE=0.3
# [default: 1024] AI max tokens
AI_MAX_TOKENS=1024

# [default: groq,claude,openai,mock] Leidziami AI provideriai (CSV)
AI_ALLOWED_PROVIDERS=groq,claude,openai,mock
# [default: llama-3.1-70b,mixtral-8x7b-32768] Leidziami Groq modeliai
AI_ALLOWED_MODELS_GROQ=llama-3.1-70b,mixtral-8x7b-32768
# [default: claude-haiku-4-5-20251001,claude-sonnet-4-5-20250929,claude-opus-4-1-20250805] Leidziami Claude modeliai
AI_ALLOWED_MODELS_CLAUDE=claude-haiku-4-5-20251001,claude-sonnet-4-5-20250929,claude-opus-4-1-20250805
# [default: gpt-4o-mini-2024-07-18,gpt-4o-2024-08-06] Leidziami OpenAI modeliai
AI_ALLOWED_MODELS_OPENAI=gpt-4o-mini-2024-07-18,gpt-4o-2024-08-06

# API raktai (privalomi jei atitinkamas provideris itrauktas i AI_ALLOWED_PROVIDERS):
GROQ_API_KEY=
ANTHROPIC_API_KEY=
OPENAI_API_KEY=

# ========================
# INBOUND EMAIL WEBHOOK (CloudMailin)
# ========================

# [default: false] CloudMailin inbound email webhook
ENABLE_EMAIL_WEBHOOK=false
# CloudMailin Basic Auth kredencialai (privalomi jei ENABLE_EMAIL_WEBHOOK=true):
CLOUDMAILIN_USERNAME=
CLOUDMAILIN_PASSWORD=
# [default: 60] Email webhook IP rate limit per minute
RATE_LIMIT_EMAIL_WEBHOOK_IP_PER_MIN=60
# [default: 5] Email webhook sender rate limit per minute
RATE_LIMIT_EMAIL_WEBHOOK_SENDER_PER_MIN=5

# ========================
# AI EMAIL SENTIMENT
# ========================

# [default: false] AI email sentiment klasifikacija (NEGATIVE/NEUTRAL/POSITIVE)
ENABLE_AI_EMAIL_SENTIMENT=false
# [default: ""] Sentiment provideris (pvz. claude)
AI_SENTIMENT_PROVIDER=
# [default: ""] Sentiment modelis (pvz. claude-haiku-4-5-20251001)
AI_SENTIMENT_MODEL=
# [default: 10] Sentiment timeout sekundemis
AI_SENTIMENT_TIMEOUT_SECONDS=10

# ========================
# EMAIL AUTO-REPLY
# ========================

# [default: false] Automatinis atsakymas i inbound email (trukstami duomenys)
ENABLE_EMAIL_AUTO_REPLY=false
# [default: false] Automatinis pasiulymas kai anketa uzpildyta
ENABLE_EMAIL_AUTO_OFFER=false
# [default: ""] CloudMailin reply-to adresas (pvz. info@vejapro.lt)
CLOUDMAILIN_REPLY_TO_ADDRESS=
# [default: 2] Max auto-reply per CallRequest
EMAIL_AUTO_REPLY_MAX_PER_CR=2

# ========================
# SCHEDULE ENGINE
# ========================

# [default: ""] Vieno operatoriaus UUID (jei tuščias, auto-pick is DB)
SCHEDULE_DEFAULT_RESOURCE_ID=
# [default: 3] Voice/Chat hold trukme minutemis
HOLD_DURATION_MINUTES=3
# [default: 60] Hold expiry worker intervalas sekundemis
SCHEDULE_HOLD_EXPIRY_INTERVAL_SECONDS=60
# [default: 15] Preview galiojimo trukme minutemis
SCHEDULE_PREVIEW_TTL_MINUTES=15
# [default: true] Server-side preview rezimas
SCHEDULE_USE_SERVER_PREVIEW=true
# [default: cd487f5c-...] UUIDv5 namespace schedule_day audit entity_id generavimui
SCHEDULE_DAY_NAMESPACE_UUID=cd487f5c-baca-4d84-b0e8-97f7bfef7248

# ========================
# NOTIFICATION WORKER
# ========================

# [default: 30] Worker intervalas sekundemis
NOTIFICATION_WORKER_INTERVAL_SECONDS=30
# [default: 50] Zinuciu batch dydis
NOTIFICATION_WORKER_BATCH_SIZE=50
# [default: 5] Max bandymu skaicius per zinute
NOTIFICATION_WORKER_MAX_ATTEMPTS=5

# ========================
# SAUGA
# ========================

# [default: false] Leisti nesaugius webhookus (true TIK testams, NIEKADA produkcijai!)
ALLOW_INSECURE_WEBHOOKS=false
# [default: false] Rodyti detales klaidu pranesimuose (true TIK dev aplinkai)
EXPOSE_ERROR_DETAILS=false
# Deploy webhook secret (GitHub Actions -> HTTPS deploy)
# Sugeneruokite: python -c "import secrets; print(secrets.token_urlsafe(32))"
# DEPLOY_WEBHOOK_SECRET=
# [default: true] Security headers (X-Frame-Options, CSP, etc.)
SECURITY_HEADERS_ENABLED=true
# [default: true] PII redakcija audit loguose
PII_REDACTION_ENABLED=true
# [default: phone,email,address,ssn,tax_id,passport,national_id,id_number] PII laukai
# PII_REDACTION_FIELDS=phone,email,address,ssn,tax_id,passport,national_id,id_number

# [default: true] API rate limiting
RATE_LIMIT_API_ENABLED=true
# [default: 300] API rate limit per minute
RATE_LIMIT_API_PER_MIN=300
# [default: true] Webhook rate limiting
RATE_LIMIT_WEBHOOK_ENABLED=true
# [default: ""] Patikimu reverse proxy sarasas (CSV CIDR/host: pvz. "10.10.50.178,127.0.0.1").
# Tik is siu peer IP bus pasitikima X-Real-IP/X-Forwarded-For antrastemis.
TRUSTED_PROXY_CIDRS=
# [default: 30] Twilio IP rate limit per minute
RATE_LIMIT_TWILIO_IP_PER_MIN=30
# [default: 10] Twilio FROM rate limit per minute
RATE_LIMIT_TWILIO_FROM_PER_MIN=10
# [default: 120] Stripe IP rate limit per minute
RATE_LIMIT_STRIPE_IP_PER_MIN=120

# ========================
# ADMIN
# ========================

# [default: ""] IP allowlist (CSV: "1.2.3.4,5.6.7.8" arba tuscias = visi leisti)
ADMIN_IP_ALLOWLIST=
# [default: ""] Staging global IP allowlist (CSV: "1.2.3.4,10.10.50.0/24").
# Jei nustatyta, staging aplinkoje visi route'ai bus leidziami tik is siu IP.
STAGING_IP_ALLOWLIST=
# [default: false] Ijungti GET /api/v1/admin/token (TIK dev/staging, reikalingas admin UI)
ADMIN_TOKEN_ENDPOINT_ENABLED=false
# [default: ""] Privalomas shared secret X-Admin-Token-Secret antrastei, kai ADMIN_TOKEN_ENDPOINT_ENABLED=true
ADMIN_TOKEN_ENDPOINT_SECRET=
# [default: 12] Admin token galiojimo laikas valandomis
ADMIN_TOKEN_TTL_HOURS=12
# [default: false] Admin dashboard AI summary pill (V3.3)
ENABLE_AI_SUMMARY=false
# [default: 5] Max vienalaikių dashboard SSE jungčių
DASHBOARD_SSE_MAX_CONNECTIONS=5
# [default: 00000000-0000-0000-0000-000000000001] Admin token sub
ADMIN_TOKEN_SUB=00000000-0000-0000-0000-000000000001
# [default: admin@test.local] Admin token email
ADMIN_TOKEN_EMAIL=admin@test.local
# [default: 168] Client token galiojimo laikas valandomis (7 dienos)
CLIENT_TOKEN_TTL_HOURS=168

# ========================
# CORS
# ========================

# [default: []] Leidziamos kilmes (CSV: "https://vejapro.lt,https://staging.vejapro.lt")
CORS_ALLOW_ORIGINS=
# [default: GET,POST,PUT,PATCH,DELETE,OPTIONS]
# CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
# [default: Authorization,Content-Type,Accept,Stripe-Signature]
# CORS_ALLOW_HEADERS=Authorization,Content-Type,Accept,Stripe-Signature

# ========================
# DOCS / OPENAPI
# ========================

# [default: true] Ijungti /docs (Swagger UI)
DOCS_ENABLED=true
# [default: true] Ijungti /openapi.json
OPENAPI_ENABLED=true
